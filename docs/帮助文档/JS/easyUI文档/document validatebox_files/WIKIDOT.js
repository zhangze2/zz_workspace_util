var WIKIDOT={};var WIKIDOT={page:function(){},modules:function(){},utils:function(){},vars:function(){}};WIKIDOT.utils={changeTextareaRowNo:function(a,c){var b=$(a);if((c<0&&b.rows+c>=5)||(c>0&&b.rows+c<=50)){b.rows=b.rows+c}}};WIKIDOT.visuals={showCenterMessage:function(b){var a=document.getElementsByTagName("body").item(0);sDiv=document.createElement("div");sDiv.id="center-message-shader";bodyHeigh=a.offsetHeight+50;viewportHeight=YAHOO.util.Dom.getClientHeight();height=Math.max(bodyHeigh,viewportHeight);sDiv.style.height=height+"px";mTable=document.createElement("table");mTable.id="center-message-wrapper";mRow=document.createElement("tr");mTd=document.createElement("td");mRow.appendChild(mTd);mTable.appendChild(mRow);mDiv=document.createElement("div");mDiv.id="center-message";mTd.appendChild(mDiv);mDiv.innerHTML=b;sDiv.style.visibility="hidden";mTable.style.visibility="hidden";a.appendChild(sDiv);a.appendChild(mTable);YAHOO.util.Dom.setY("center-message-wrapper",OZONE.visuals.scrollOffsetY());mTable.style.height=viewportHeight+"px";ofx=new fx.Opacity("center-message",{duration:100});ofx.setOpacity(0);sDiv.style.visibility="visible";mTable.style.visibility="visible";ofx.custom(0,1)},changeCenterMessage:function(a){ofx=new fx.Opacity("center-message",{duration:100});ofx.custom(1,0);setTimeout('OZONE.utils.setInnerHTMLContent("center-message", "'+a+'");ofx.custom(0,1)',200)},hideCenterMessage:function(){var a=document.getElementsByTagName("body").item(0);sDiv=document.getElementById("center-message-shader");mTable=document.getElementById("center-message-wrapper");if(sDiv!=null){a.removeChild(sDiv);a.removeChild(mTable)}}};WIKIDOT.utils.formatDates=function(c){if(c==null){var e=document.getElementsByTagName("odate")}else{var b=$(c);var e=b.getElementsByTagName("odate")}for(i=0;i<e.length;i++){var d=e[i].innerHTML;var a=new Date();a.setTime(d*1000);var f=a.toLocaleString();e[i].innerHTML=f}};WIKIDOT.utils.handleError=function(b){if(b.status!="ok"){var a=new OZONE.dialogs.ErrorDialog();if(b.status=="no_permission"){a.title=ogettext("Permission error")}a.content="<h1>"+ogettext("Please note:")+"</h1><p>"+b.message+"</p>";a.show();return false}else{return true}};WIKIDOT.render={};WIKIDOT.render.printuser=function(b,f,e){var d='href="javascript:;" onclick="WIKIDOT.page.listeners.userInfo('+b+')"';var a='<span class="printuser">';var c=window.location.protocol;if(e==true){a+="<a "+d+' ><!--[if gte IE 7]><!--><img class="small" src="/common--images/avatars/'+Math.floor(b/1000)+"/"+b+'/a16.png" alt="" style="background-image:url('+c+"//"+URL_HOST+"/userkarma.php?u="+b+')"/><!--<![endif]-->';a+='<!--[if lt IE 7]><img class="small" src="/common&#45;&#45;images/avatars/'+Math.floor(b/1000)+"/"+b+'/a16.png" alt="" style="filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='+c+"//"+URL_HOST+"/userkarma.php?u="+b+",sizingMethod='scale')\"/><![endif]-->"}a+="<a "+d+">"+f+"</a></span>";return a};WIKIDOT.render.fixAvatarHover=function(c){var e=YAHOO.util.Dom.getElementsByClassName("printuser avatarhover","span",c);for(var d=0;d<e.length;d++){var b=e[d].getElementsByTagName("a")[0];if(!b){b=e[d].getElementsByTagName("img")[0]}if(b&&b.getElementsByTagName("img").length==1){YAHOO.util.Event.addListener(b,"mouseover",WIKIDOT.render.fixAvatarHover.showHover)}}};WIKIDOT.render.fixAvatarHover.showHover=function(m){if($("avatar-hover-container")==null){var s=document.createElement("div");s.style.visibility="hidden";s.style.position="absolute";s.style.width="100%";document.getElementsByTagName("body")[0].appendChild(s)}else{s=$("avatar-hover-container")}if(this.hoverAvatar==null){var j=this.getElementsByTagName("img")[0];var r=j.src.replace(/a16\.png/,"a48.png");r=r.replace(/16$/,"48");var o=document.createElement("a");var k=document.createElement("img");k.src=r;o.className="avatar-hover";o.style.position="absolute";o.style.display="none";o.href=this.href;o.onclick=this.onclick;var n=document.createElement("div");n.appendChild(k);o.appendChild(n);YAHOO.util.Dom.generateId(o);this.hoverAvatar=o;s.appendChild(o);YAHOO.util.Event.addListener(o,"mouseout",WIKIDOT.render.fixAvatarHover.hideHover);YAHOO.util.Event.addListener(o,"mousemove",WIKIDOT.render.fixAvatarHover.mousemove);var b=new fx.Opacity(o,{duration:200});this.hoverAvatarEffect=b;b.setOpacity(0)}var l=this.hoverAvatar;var h,g;h=YAHOO.util.Dom.getX(this)+8+8;g=YAHOO.util.Dom.getY(this)+8;l.style.display="block";var k=l.getElementsByTagName("img")[0];var q,f;var c=false;if(k.height==0){q=48;f=48;c=true;YAHOO.util.Event.addListener(k,"load",function(e,a){var d=this;YAHOO.util.Dom.setXY(a,[h-(d.width/2+8),g-(d.height/2+8)])},l)}else{q=k.height;f=k.width}YAHOO.util.Dom.setXY(l,[h-(f/2+8),g-(q/2+8)]);if(l.style.opacity==0){this.hoverAvatarEffect.custom(0,1)}l.lastAccess=(new Date()).getTime();setTimeout('WIKIDOT.render.fixAvatarHover.mousemove.autoHide("'+l.id+'")',1000)};WIKIDOT.render.fixAvatarHover.hideHover=function(b){var a=YAHOO.util.Event.getRelatedTarget(b);if(!YAHOO.util.Dom.isAncestor(this,a)&&a!=this){this.style.display="none";this.style.visibility="hidden";this.style.opacity=0}};WIKIDOT.render.fixAvatarHover.mousemove=function(a){this.lastAccess=(new Date()).getTime()};WIKIDOT.render.fixAvatarHover.mousemove.autoHide=function(d){var b=$(d);var c=(new Date()).getTime();if(b.lastAccess+3000<c){b.style.display="none";b.style.visibility="hidden";b.style.opacity=0}else{setTimeout('WIKIDOT.render.fixAvatarHover.mousemove.autoHide("'+b.id+'")',1000)}};WIKIDOT.page.vars={};WIKIDOT.page.vars.forceLockFlag=false;WIKIDOT.page.listeners={editClick:function(f){var b=WIKIREQUEST.info.pageId;if($("np-text")){if($("np-text").value!=""){var a=new OZONE.dialogs.ErrorDialog();a.content='You have an active editor somewhere already and it is not possible to edit multiple elements at once.<br/><br/>(<a href="javascript:;" onclick="OZONE.visuals.scrollTo(\''+WIKIDOT.Editor.editElementId+"');OZONE.dialog.cleanAll()\">scroll to active editor</a>)";a.show();return}else{var c=$("new-post-form-container");c.parentNode.removeChild(c);if($("new-post-button")){$("new-post-button").style.display=""}WIKIDOT.Editor.shutDown()}}if(b!=null){var d=new Object();d.page_id=b;d.mode="page";d.wiki_page=WIKIREQUEST.info.requestPageName}else{WIKIDOT.page.vars.newPage=true;var d=new Object();d.mode="page";d.wiki_page=WIKIREQUEST.info.requestPageName}if(WIKIDOT.page.vars.forceLockFlag==true){WIKIDOT.page.vars.forceLockFlag=false;d.force_lock="yes"}OZONE.ajax.requestModule("edit/PageEditModule",d,WIKIDOT.page.callbacks.editClick)},append:function(b){var a=new Object();a.page_id=WIKIREQUEST.info.pageId;a.mode="append";OZONE.ajax.requestModule("edit/PageEditModule",a,WIKIDOT.page.callbacks.editClick)},editSection:function(c){var a=this.id.replace(/edit\-section\-b\-/,"");var b=new Object();b.page_id=WIKIREQUEST.info.pageId;b.mode="section";b.section=a;OZONE.ajax.requestModule("edit/PageEditModule",b,WIKIDOT.page.callbacks.editClick)},historyClick:function(b){var a=new Object();a.page_id=WIKIREQUEST.info.pageId;OZONE.ajax.requestModule("history/PageHistoryModule",a,WIKIDOT.page.callbacks.historyClick)},filesClick:function(b){var a=new Object();a.page_id=WIKIREQUEST.info.pageId;OZONE.ajax.requestModule("files/PageFilesModule",a,WIKIDOT.page.callbacks.filesClick)},blockClick:function(b){var a=new Object();a.page_id=WIKIREQUEST.info.pageId;OZONE.ajax.requestModule("pageblock/PageBlockModule",a,WIKIDOT.page.callbacks.blockClick)},moreOptionsClick:function(b){if(!$("page-options-bottom")){return}var a=new fx.Opacity("page-options-bottom-2",{duration:200});a.setOpacity(0);$("page-options-bottom-2").style.display="block";a.custom(0,1);$("more-options-button").innerHTML=$("more-options-button").innerHTML.replace(/\+/,"-");YAHOO.util.Event.removeListener("more-options-button","click",WIKIDOT.page.listeners.moreOptionsClick);YAHOO.util.Event.addListener("more-options-button","click",WIKIDOT.page.listeners.lessOptionsClick);OZONE.visuals.scrollTo("page-options-bottom")},lessOptionsClick:function(b){if(!$("page-options-bottom-2")){return}var a=new fx.Opacity("page-options-bottom-2",{duration:200});a.custom(1,0);setTimeout('document.getElementById("page-options-bottom-2").style.display="none"',200);$("more-options-button").innerHTML=$("more-options-button").innerHTML.replace(/\-/,"+");YAHOO.util.Event.removeListener("more-options-button","click",WIKIDOT.page.listeners.lessOptionsClick);YAHOO.util.Event.addListener("more-options-button","click",WIKIDOT.page.listeners.moreOptionsClick)},logoutClick:function(b){var a=new Object();a.action="Login2Action";a.event="logout";OZONE.ajax.requestModule(null,a,WIKIDOT.page.callbacks.logoutClick)},loginClick:function(j,a,g){var d=WIKIREQUEST.info.lang;if(d=="en"){d="www"}var b=a||WIKIREQUEST.info.siteId;var h=USE_SSL?"https":"http";var c=h+"://"+URL_HOST+"/default--flow/login__LoginPopupScreen?originSiteId="+b;if(!b){c+="&originUri="+window.location.href}var f=window.location;c+="&openerUri="+f.protocol+"//"+f.host;if(g){c+="&invitationHash="+g}var k=window.open(c,"login","width=700,height=640,resizable=yes,directories=no,status=yes,menubar=yes,location=yes,scrollbars=yes");k.focus()},createAccount:function(j,a,g){var d=WIKIREQUEST.info.lang;if(d=="en"){d="www"}var b=a||WIKIREQUEST.info.siteId;var h=USE_SSL?"https":"http";var c=h+"://"+URL_HOST+"/default--flow/login__CreateAccountScreen?originSiteId="+b;if(!b){c+="&originUri="+window.location.href}var f=window.location;c+="&openerUri="+f.protocol+"//"+f.host;if(WIKIREQUEST.createAccountSkipCongrats){c+="&origUrlForce=true"}if(g){c+="&invitationHash="+g}var k=window.open(c,"login","width=700,height=640,resizable=yes,directories=no,status=yes,menubar=yes,location=yes,scrollbars=yes");k.focus()},toggleEditSections:function(m){if(WIKIDOT.page.vars.editSectionsActive==false){var n=$("page-content");var a=n.childNodes;var s=new Array();for(var h=0;h<a.length;h++){var b=a[h].tagName;if(b&&b.toLowerCase().match(/^h[1-6]$/)&&a[h].id.match(/^toc/)){s.push(a[h])}}if(s.length==0){var r=new OZONE.dialogs.ErrorDialog();r.content="There are no isolated sections to edit.";r.show();return}var q=0;var c=["h1","h2","h3","h4","h5","h6"];for(var h=0;h<c.length;h++){var k=n.getElementsByTagName(c[h]);for(var f=0;f<k.length;f++){if(k[f].id.match(/^toc/)){q++}}}if(q!=s.length){alert("It seems that headings do not have a valid structure...");return}var d=new Array();for(var h=0;h<s.length;h++){var o=document.createElement("a");o.innerHTML="edit";o.href="javascript:;";o.className="edit-section-button";o.id="edit-section-b-"+s[h].id.replace(/toc/,"");YAHOO.util.Event.addListener(o,"click",WIKIDOT.page.listeners.editSection);var g=new fx.Opacity(o,{duration:300});g.setOpacity(0);n.insertBefore(o,s[h]);g.custom(0,1);d.push(o)}WIKIDOT.page.vars.editHeadings=s;WIKIDOT.page.vars.sectionEditButtons=d;WIKIDOT.page.vars.editSectionsActive=true}else{var l=WIKIDOT.page.vars.sectionEditButtons;for(var h=0;h<l.length;h++){l[h].parentNode.removeChild(l[h])}WIKIDOT.page.vars.editSectionsActive=false;return}},editMetaClick:function(b){var a=new Object();a.pageId=WIKIREQUEST.info.pageId;OZONE.ajax.requestModule("edit/EditMetaModule",a,WIKIDOT.page.callbacks.editMeta)},editTags:function(b){var a=new Object();a.pageId=WIKIREQUEST.info.pageId;OZONE.ajax.requestModule("pagetags/PageTagsModule",a,WIKIDOT.page.callbacks.editTags)},siteTools:function(a){OZONE.ajax.requestModule("sitetools/SiteToolsModule",null,WIKIDOT.page.callbacks.siteTools)},backlinksClick:function(c){var a=WIKIREQUEST.info.pageId;var b=new Object();b.page_id=a;OZONE.ajax.requestModule("backlinks/BacklinksModule",b,WIKIDOT.page.callbacks.backlinksClick)},watchersClick:function(c){var a=WIKIREQUEST.info.pageId;var b={};b.page_id=a;b.verbose=true;OZONE.ajax.requestModule("watch/WhoWatchesModule",b,WIKIDOT.page.callbacks.backlinksClick)},viewSourceClick:function(c){var a=WIKIREQUEST.info.pageId;var b=new Object();b.page_id=a;OZONE.ajax.requestModule("viewsource/ViewSourceModule",b,WIKIDOT.page.callbacks.viewSourceClick)},closeActionArea:function(d){var b=$("action-area");if(b){if(("page-options-bottom")){var c=new fx.ScrollBottom({duration:100,transition:fx.sineOut});c.scrollTo("page-options-bottom")}setTimeout('$("action-area").innerHTML = "";$("action-area").style.display = "none"',200)}},userInfo:function(a){var b=new Object();b.user_id=a;OZONE.ajax.requestModule("users/UserInfoWinModule",b,WIKIDOT.page.callbacks.userInfo)},anonymousUserInfo:function(a){var b=new Object();b.userString=a;OZONE.ajax.requestModule("users/AnonymousInfoWinModule",b,WIKIDOT.page.callbacks.userInfo)},renamePage:function(b){var a=new Object();a.pageId=WIKIREQUEST.info.pageId;OZONE.ajax.requestModule("rename/RenamePageModule",a,WIKIDOT.page.callbacks.renamePage)},deletePage:function(b){var a=new Object();a.pageId=WIKIREQUEST.info.pageId;a["delete"]="yes";OZONE.ajax.requestModule("rename/RenamePageModule",a,WIKIDOT.page.callbacks.renamePage)},createPageDiscussion:function(b){var a=new Object();a.page_id=WIKIREQUEST.info.pageId;a.action="ForumAction";a.event="createPageDiscussionThread";OZONE.ajax.requestModule("Empty",a,WIKIDOT.page.callbacks.createPageDiscussion)},flagPageObjectionable:function(b){var a=new Object();a.path=window.location.pathname;OZONE.ajax.requestModule("report/FlagPageModule",a,WIKIDOT.page.callbacks.flagPageObjectionable)},pageBugReport:function(a){OZONE.ajax.requestModule("report/BugReportModule",null,WIKIDOT.page.callbacks.pageBugReport)},pageRate:function(a){OZONE.ajax.requestModule("pagerate/PageRateModule",{pageId:WIKIREQUEST.info.pageId},WIKIDOT.page.callbacks.pageRate)},parentClick:function(b){var a=new Object();a.page_id=WIKIREQUEST.info.pageId;OZONE.ajax.requestModule("parent/ParentPageModule",a,WIKIDOT.page.callbacks.parentClick)},passwordRecoveryClick:function(a){OZONE.ajax.requestModule("passwordrecovery/PasswordRecoveryModule",null,WIKIDOT.page.callbacks.passwordRecovery)},foldToc:function(b){var a=new fx.Opacity($("toc-list"),{duration:200,onComplete:function(){$("toc-list").style.display="none";var c=$("toc-action-bar").getElementsByTagName("a");c[0].style.display="none";c[1].style.display=""}});a.custom(1,0)},unfoldToc:function(c){var b=new fx.Opacity($("toc-list"),{duration:200});b.setOpacity(0);$("toc-list").style.display="block";b.custom(0,1);var a=$("toc-action-bar").getElementsByTagName("a");a[1].style.display="none";a[0].style.display=""},search:function(c){var b=$("search-top-box-input").value;b=encodeURIComponent(b);var a="/search:site/q/"+b;window.location.href=a;YAHOO.util.Event.preventDefault(c)},printClick:function(b){var a="/printer--friendly/"+window.location.pathname;var c=window.open(a,"_blank","location=no,menubar=yes,titlebar=no,resizable=yes,scrollbars=yes,width="+(screen.width*0.8)+",height="+(screen.height*0.8)+",top="+(screen.height*0.1)+",left="+(screen.width*0.1));return c},toggleCollapsibleBlock2:function(a){var c=$j(a).parent().parent(".collapsible-block");if(c.length==0){c=$j(a).parent().parent().parent(".collapsible-block")}var b=false;c.children(".collapsible-block-folded:visible").each(function(){b=true});if(b){c.children(".collapsible-block-folded").hide();c.children(".collapsible-block-unfolded").children(".collapsible-block-content").hide();c.children(".collapsible-block-unfolded").show();c.children(".collapsible-block-unfolded").children(".collapsible-block-unfolded-link").show();c.children(".collapsible-block-unfolded").children(".collapsible-block-content").fadeIn()}else{c.children(".collapsible-block-unfolded").children().hide();c.children(".collapsible-block-folded").show()}},toggleCollapsibleBlock:function(g,h){var c=YAHOO.util.Event.getTarget(g);var f=c.parentNode;while(f&&f.className!="collapsible-block"){f=f.parentNode}if(!f){return}var b=YAHOO.util.Dom.getElementsByClassName("collapsible-block-folded","div",f);var a=YAHOO.util.Dom.getElementsByClassName("collapsible-block-unfolded","div",f);b=b[0];a=a[0];if(h){var d=new fx.Opacity(a,{duration:200});d.setOpacity(0);b.style.display="none";a.style.display="block";d.custom(0,1)}else{var d=new fx.Opacity(b,{duration:200});d.setOpacity(0);a.style.display="none";b.style.display="block";d.custom(0,1)}},awatch:function(g,b,d,c){var f={};f.action="WatchAction";f.event="watch";f.pageId=WIKIREQUEST.info.pageId;f.type=b;f.nolayout=true;if(d){f.unsubscribe=true}var a=c;OZONE.ajax.requestModule("watch/PageWatchStatusModule",f,function(h){if(h.status=="no_permission"){OZONE.ajax.requestModule("watch/NotLoggedInModule",{},function(l){var k=new OZONE.dialogs.ActionDialog();k.content=l.body;k.show();return});return}if(!WIKIDOT.utils.handleError(h)){return}if(a){window.location.reload();return}var j=YAHOO.util.Dom.getElementsByClassName("page-watch-options");for(i=0;i<j.length;i++){var e=new fx.Opacity(j[i],{duration:300});e.setOpacity(0);j[i].innerHTML=h.body;e.custom(0,1)}})},join:function(f,c){var d={action:"MembershipApplyAction",event:"join"};if(c=="now"){var a=new OZONE.dialogs.WaitBox();a.content="Joining..";a.show();OZONE.ajax.requestModule(null,d,function(g){if(!WIKIDOT.utils.handleError(g)){return}var e=new OZONE.dialogs.SuccessBox();e.content="Joined!";e.show();setTimeout(function(){window.location.reload()},1000)})}if(c=="create_account"){WIKIDOT.page.listeners.createAccount()}var b=function(h){var e=WIKIREQUEST.info.lang;if(e=="en"){e="www"}var k=WIKIREQUEST.info.siteId;var j="https://"+URL_HOST+"/default--flow/login__Join"+h+"Screen?originSiteId="+k;if(!k){j+="&originUri="+window.location.href}var g=window.location;j+="&openerUri="+g.protocol+"//"+g.host;window.open(j,"login","width=700,height=550,resizable=yes,directories=no,status=yes,menubar=yes,location=yes,scrollbars=yes")};if(c=="password"){b("Password")}if(c=="apply"){b("Apply")}if(c=="applyandpassword"){b("ApplyAndPassword")}}};WIKIDOT.page.callbacks={filesClick:function(a){if(!WIKIDOT.utils.handleError(a)){return}OZONE.utils.setInnerHTMLContent("action-area",a.body);$("action-area").style.display="block";WIKIDOT.page.utils.addCloseToActionArea();setTimeout("OZONE.visuals.scrollTo('action-area')",200)},editClick:function(b){if(!WIKIDOT.utils.handleError(b)){return}if(WIKIDOT.page.vars.newPage==true){$("page-content").innerHTML=""}if(WIKIDOT.page.vars.editSectionsActive){WIKIDOT.page.listeners.toggleEditSections()}editMode=b.mode;if(b.locked==true){WIKIDOT.page.vars.locked=true;OZONE.dialog.factory.shader().show();var j=OZONE.dialog.factory.boxcontainer();j.setContent(b.body);j.showContent();return}else{WIKIDOT.page.vars.locked=false;var a=WIKIREQUEST.info.pageId;if(a!=null){if($("page-options-bottom")){$("page-options-bottom").style.display="none";$("page-options-bottom-2").style.display="none"}if($("page-options-area-bottom")){$("page-options-area-bottom").style.display="none"}}WIKIDOT.page.vars.editlock=new Object();WIKIDOT.page.vars.editlock.id=b.lock_id;WIKIDOT.page.vars.editlock.secret=b.lock_secret;WIKIDOT.page.vars.editlock.revisionId=b.page_revision_id;WIKIDOT.page.vars.editlock.timeLeft=b.timeLeft}if(editMode=="section"){if(b.section==null){alert("Section edit error. Section does not exist");return}WIKIDOT.page.vars.editlock.rangeStart=b.rangeStart;WIKIDOT.page.vars.editlock.rangeEnd=b.rangeEnd;var f="toc"+b.section;var h=$(f);var e=document.createElement("div");e.id="edit-section-content";var d=$("page-content");d.insertBefore(e,h);var g=new RegExp("^h[1-"+h.tagName.replace(/h/i,"")+"]","i");var c=h.nextSibling;e.appendChild(h);while(c!=null){if(c.tagName&&c.tagName.match(g)&&c.id.match(/^toc/)){break}ns0=c;c=c.nextSibling;e.appendChild(ns0)}if(c){d.insertBefore($("action-area"),c)}else{d.appendChild($("action-area"))}}OZONE.utils.setInnerHTMLContent("action-area",b.body);$("action-area").style.display="block";setTimeout("OZONE.visuals.scrollTo('action-area')",200)},historyClick:function(a){if(!WIKIDOT.utils.handleError(a)){return}OZONE.utils.setInnerHTMLContent("action-area",a.body);$("action-area").style.display="block";WIKIDOT.page.utils.addCloseToActionArea()},logoutClick:function(a){if(!WIKIDOT.utils.handleError(a)){return}window.location.reload()},passwordRecovery:function(b){if(!WIKIDOT.utils.handleError(b)){return}var a=new OZONE.dialogs.Dialog();a.content=b.body;a.show()},createAccount:function(b){if(!WIKIDOT.utils.handleError(b)){return}var a=new OZONE.dialogs.Dialog();a.content=b.body;a.show()},backlinksClick:function(a){if(!WIKIDOT.utils.handleError(a)){return}OZONE.utils.setInnerHTMLContent("action-area",a.body);$("action-area").style.display="block";WIKIDOT.page.utils.addCloseToActionArea();setTimeout("OZONE.visuals.scrollTo('action-area')",300)},viewSourceClick:function(a){if(!WIKIDOT.utils.handleError(a)){return}OZONE.utils.setInnerHTMLContent("action-area",a.body);$("action-area").style.display="block";WIKIDOT.page.utils.addCloseToActionArea();setTimeout("OZONE.visuals.scrollTo('action-area')",300)},userInfo:function(b){if(!WIKIDOT.utils.handleError(b)){return}var a=new OZONE.dialogs.Dialog();a.content=b.body;a.clickOutsideToClose=true;a.show()},renamePage:function(a){if(!WIKIDOT.utils.handleError(a)){return}$("action-area").innerHTML=a.body;$("action-area").style.display="block";WIKIDOT.page.utils.addCloseToActionArea();setTimeout("OZONE.visuals.scrollTo('action-area')",300)},editTags:function(a){if(!WIKIDOT.utils.handleError(a)){return}$("action-area").innerHTML=a.body;$("action-area").style.display="block";WIKIDOT.page.utils.addCloseToActionArea();setTimeout("OZONE.visuals.scrollTo('action-area')",300)},editMeta:function(a){if(!WIKIDOT.utils.handleError(a)){return}$("action-area").innerHTML=a.body;$("action-area").style.display="block";WIKIDOT.page.utils.addCloseToActionArea();setTimeout("OZONE.visuals.scrollTo('action-area')",300)},blockClick:function(a){if(!WIKIDOT.utils.handleError(a)){return}$("action-area").innerHTML=a.body;$("action-area").style.display="block";WIKIDOT.page.utils.addCloseToActionArea();setTimeout("OZONE.visuals.scrollTo('action-area')",300)},pageRate:function(a){if(!WIKIDOT.utils.handleError(a)){return}$("action-area").innerHTML=a.body.replace(/prw54353/,"prw54354");$("action-area").style.display="block";WIKIDOT.page.utils.addCloseToActionArea();setTimeout("OZONE.visuals.scrollTo('action-area')",300)},siteTools:function(a){if(!WIKIDOT.utils.handleError(a)){return}$("action-area").innerHTML=a.body;$("action-area").style.display="block";WIKIDOT.page.utils.addCloseToActionArea();OZONE.dialog.hovertip.dominit("site-tools-box",{delay:700,valign:"center"});setTimeout("OZONE.visuals.scrollTo('action-area')",300)},parentClick:function(a){if(!WIKIDOT.utils.handleError(a)){return}$("action-area").innerHTML=a.body;$("action-area").style.display="block";WIKIDOT.page.utils.addCloseToActionArea();setTimeout("OZONE.visuals.scrollTo('action-area')",300)},createPageDiscussion:function(b){if(!WIKIDOT.utils.handleError(b)){return}var a="/forum/t-"+b.thread_id+"/"+b.thread_unix_title;window.location.href=a},flagPageObjectionable:function(b){if(!WIKIDOT.utils.handleError(b)){return}var a=new OZONE.dialogs.Dialog();a.content=b.body;a.show()},pageBugReport:function(b){if(!WIKIDOT.utils.handleError(b)){return}var a=new OZONE.dialogs.Dialog();a.content=b.body;a.show()}};WIKIDOT.page.utils={scrollToReference:function(a){OZONE.visuals.scrollTo(a,{blink:true})},addCloseToActionArea:function(){var a=document.createElement("a");a.innerHTML="close";a.href="javascript:;";a.className="action-area-close";var b=$("action-area");if(b.firstChild){b.insertBefore(a,b.firstChild)}else{b.appendChild(a)}YAHOO.util.Event.addListener(a,"click",WIKIDOT.page.listeners.closeActionArea)},openHelpPop:function(a){var b=window.open("http://test.wikidot.com/default--screen/HelpPop/topic/"+a,"_blank","location=no,menubar=no,titlebar=no,resizable=yes,scrollbars=yes,width="+(screen.width*0.8)+",height="+(screen.height*0.8)+",top="+(screen.height*0.1)+",left="+(screen.width*0.1));return b}};WIKIDOT.page.fixers={fixMathRef:function(){var b=YAHOO.util.Dom.getElementsByClassName("eref");var g,a,d;if(b&&b.length>0){for(var c=0;c<b.length;c++){a=b[c];g=a.innerHTML;d=$("equation-"+g);if(d){var e=d.getElementsByTagName("img").item(0).cloneNode(true);var f='<div class="equation"><div class="e-heading">Equation ('+g+')</div><div class="e-content"><img style="margin: 1em" src="'+e.src+'"/></div><div class="e-footer">(click to scroll to the equation)</div></div>';OZONE.dialog.hovertip.makeTip(a,{text:f,valign:"center",style:{width:"auto",backgroundColor:"white"}})}}}},fixFootnoteRef:function(a){var f=YAHOO.util.Dom.getElementsByClassName("footnoteref","a",a);for(var b=0;b<f.length;b++){var d=f[b];var h=d.id.replace(/^footnoteref\-/,"");var g=$("footnote-"+h);var c=g.innerHTML.replace(/<a.*?<\/a>\. /,"");var e='<div class="footnote"><div class="f-heading">Footnote '+h+'.</div><div class="f-content">'+c+'</div><div class="f-footer">(click to scroll to footnotes)</div></div>';OZONE.dialog.hovertip.makeTip(d,{text:e,valign:"center",smartWidthLimit:0.7,style:{width:"auto",backgroundColor:"white"}})}},fixBibRef:function(a){var d=YAHOO.util.Dom.getElementsByClassName("bibcite","a",a);for(var b=0;b<d.length;b++){var g=d[b];var h=g.id.replace(/bibcite\-/,"");h=h.replace(/\-[0-9]+a$/,"");var e=$("bibitem-"+h);var c=e.innerHTML.replace(/^\s*[0-9]+\.\s*/,"");var f='<div class="reference"><div class="r-heading">Reference '+h.replace(/^([0-9]+\-)/,"")+'.</div><div class="r-content">'+c+'</div><div class="r-footer">(click to scroll to bibliography)</div></div>';OZONE.dialog.hovertip.makeTip(g,{text:f,valign:"center",smartWidthLimit:0.7,style:{width:"auto",backgroundColor:"white"}})}},fixDates:function(){OZONE.utils.formatDates()},fixMenu:function(a){var d=$(a);if(d==null){return}var c=d.getElementsByTagName("li");for(var b=0;b<c.length;b++){YAHOO.util.Event.addListener(c[b],"mouseover",function(f){YAHOO.util.Dom.addClass(this,"sfhover")});YAHOO.util.Event.addListener(c[b],"mouseout",function(f){YAHOO.util.Dom.removeClass(this,"sfhover")})}},fixEmails:function(a){jQuery("span.wiki-email",a).each(function(){var f=jQuery;var b=f(this).text();if(b.match(/^([a-z0-9\-\.\|_])+#/i)){var e=b.split("#");var d=e[0].split("").reverse().join("").replace("|","@");var g=e[1].split("").reverse().join("").replace("|","@");var c=f("<a/>").attr("href","mailto:"+d).html(g);f(this).html(c).css({visibility:"visible"})}})},fixFoldableMenus:function(o){var b=$(o);if(!b){return}var n=YAHOO.util.Dom.getElementsByClassName("foldable-list-container","div",b);for(var k=0;k<n.length;k++){var r=n[k].getElementsByTagName("ul");for(var g=0;g<r.length;g++){var m=r[g];var h=m.parentNode;var f=true;while(h&&!YAHOO.util.Dom.hasClass(h,"foldable-list-container")){if(h.tagName&&h.tagName.toLowerCase()=="li"){f=false;break}h=h.parentNode}if(!f){m.originalDisplay=m.style.display;m.style.display="none";YAHOO.util.Dom.addClass(h,"folded");h.eff=new fx.Opacity(m,{duration:300});var d=h.childNodes[0];if(d.tagName!="A"){var q=document.createElement("a");h.insertBefore(q,d);q.appendChild(d);q.href="javascript:;"}}}var e=n[k].getElementsByTagName("a");var l=window.location.pathname;for(var g=0;g<e.length;g++){var c=e[g].href.replace(/^[a-z]*:\/\/[^\/]+\/([^\/]+).*/,"/$1");if(c==l){var h=e[g].parentNode;while(h&&!YAHOO.util.Dom.hasClass(h,"foldable-list-container")){if(h.tagName=="LI"&&YAHOO.util.Dom.hasClass(h,"folded")){YAHOO.util.Dom.replaceClass(h,"folded","unfolded");var m=h.getElementsByTagName("ul")[0];m.style.display=m.originalDisplay}h=h.parentNode}}}YAHOO.util.Event.addListener(n[k],"click",WIKIDOT.page.fixers._foldableMenuToggle)}},_foldableMenuToggle:function(c){var a;a=YAHOO.util.Event.getTarget(c,true);if(a.tagName=="A"&&a.href!="#"&&a.href!="javascript:;"){return}while(!a.tagName||a.tagName.toLowerCase()!="li"){a=a.parentNode}if(!(YAHOO.util.Dom.hasClass(a,"folded")||YAHOO.util.Dom.hasClass(a,"unfolded"))){return}if(YAHOO.util.Dom.hasClass(a,"folded")){YAHOO.util.Dom.replaceClass(a,"folded","unfolded");var b=a.getElementsByTagName("ul")[0];a.eff.setOpacity(0);b.style.display=b.originalDisplay;a.eff.custom(0,1)}else{YAHOO.util.Dom.replaceClass(a,"unfolded","folded");var b=a.getElementsByTagName("ul")[0];b.style.display="none"}},fixMenuList:function(b){b=$(b);if(!b){return}var d=b.getElementsByTagName("li");for(var e=0;e<d.length;e++){var f=d[e].childNodes[0];if(f.tagName!="A"&&f.nodeType==3&&f.innerHTML!=""){var c=document.createElement("a");d[e].insertBefore(c,f);c.appendChild(f);c.href="javascript:;"}}}};WIKIDOT.page.vars={editSectionsActive:false};WIKIDOT.page.account={};WIKIDOT.page.account.shower=function(b){var a=$("account-options");if(!a.eff){a.eff=new fx.Opacity(a,{duration:200})}a.eff.setOpacity(0);a.style.display="block";a.eff.custom(0,1)};WIKIDOT.page.account.closer=function(d){var b=$("account-options");var a=YAHOO.util.Event.getRelatedTarget(d);var c=false;if(a==b){c=true}if(a.parentNode==b){c=true}if(a.parentNode.parentNode==b){c=true}if(a.parentNode.parentNode.parentNode==b){c=true}if(c==true){return}b.eff.setOpacity(0);b.style.display="none"};WIKIDOT.page.init=function(){YAHOO.util.Event.addListener("edit-button","click",WIKIDOT.page.listeners.editClick);YAHOO.util.Event.addListener("pagerate-button","click",WIKIDOT.page.listeners.pageRate);YAHOO.util.Event.addListener("tags-button","click",WIKIDOT.page.listeners.editTags);YAHOO.util.Event.addListener("history-button","click",WIKIDOT.page.listeners.historyClick);YAHOO.util.Event.addListener("files-button","click",WIKIDOT.page.listeners.filesClick);YAHOO.util.Event.addListener("print-button","click",WIKIDOT.page.listeners.printClick);YAHOO.util.Event.addListener("site-tools-button","click",WIKIDOT.page.listeners.siteTools);YAHOO.util.Event.addListener("more-options-button","click",WIKIDOT.page.listeners.moreOptionsClick);YAHOO.util.Event.addListener("edit-append-button","click",WIKIDOT.page.listeners.append);YAHOO.util.Event.addListener("edit-sections-button","click",WIKIDOT.page.listeners.toggleEditSections);YAHOO.util.Event.addListener("edit-meta-button","click",WIKIDOT.page.listeners.editMetaClick);YAHOO.util.Event.addListener("backlinks-button","click",WIKIDOT.page.listeners.backlinksClick);YAHOO.util.Event.addListener("watchers-button","click",WIKIDOT.page.listeners.watchersClick);YAHOO.util.Event.addListener("parent-page-button","click",WIKIDOT.page.listeners.parentClick);YAHOO.util.Event.addListener("view-source-button","click",WIKIDOT.page.listeners.viewSourceClick);YAHOO.util.Event.addListener("page-block-button","click",WIKIDOT.page.listeners.blockClick);YAHOO.util.Event.addListener("rename-move-button","click",WIKIDOT.page.listeners.renamePage);YAHOO.util.Event.addListener("delete-button","click",WIKIDOT.page.listeners.deletePage);YAHOO.util.Event.addListener("search-top-box-form","submit",WIKIDOT.page.listeners.search);OZONE.dom.onDomReady(function(){OZONE.dialog.hovertip.dominit("html-body",{delay:700,valign:"center"});WIKIDOT.page.fixers.fixMenuList("top-bar");WIKIDOT.page.fixers.fixFoldableMenus("side-bar");WIKIDOT.page.fixers.fixMathRef();WIKIDOT.page.fixers.fixFootnoteRef();WIKIDOT.page.fixers.fixBibRef();WIKIDOT.page.fixers.fixDates($("html-body"));WIKIDOT.page.fixers.fixEmails(jQuery("body"));WIKIDOT.render.fixAvatarHover();var e=$("account-topbutton");if(e){YAHOO.util.Event.addListener(e,"mousedown",WIKIDOT.page.account.shower);YAHOO.util.Event.addListener("account-options","mouseout",WIKIDOT.page.account.closer)}WIKIDOT.page.fixers.fixMenu("top-bar");WIKIDOT.page.fixers.fixMenu("side-bar");var d=$("notifications-dialog");if(d!=null){var c=new OZONE.dialogs.Dialog();c.content=d.innerHTML;c.show();setTimeout("OZONE.dialog.factory.boxcontainer().centerContent();",1000)}var g=window.location.pathname;if(g.match(/^\/[a-z0-9\-:_]+\/edit\/true/)||WIKIREQUEST.autoEdit){WIKIDOT.page.listeners.editClick()}var f="/"+WIKIREQUEST.info.pageUnixName;var b=location.protocol+"//"+WIKIREQUEST.info.domain+f;jQuery("#top-bar, .mark-current-link").find("a[href='"+f+"'], a[href='"+b+"']").addClass("current-link")},"dummy-ondomready-block");OZONE.loc.addMessage("close window","zamknij okno","pl");OZONE.loc.addMessage("close message","zamknij wiadomość","pl");OZONE.loc.addMessage("Error","Blad","pl");OZONE.loc.addMessage("Oooops!","Ups!","pl");OZONE.loc.addMessage("Permission error","Błąd uprawnień","pl");var a={ago:"temu",day:"dzień",days:"dni",hours:"godziny",hour:"godzina",minutes:"minuty",minute:"minuta",seconds:"sekundy",second:"sekunda"};OZONE.loc.addMessages(a,"pl");$j(function(){if($j("#navi-bar").length>0){$j("#container-wrap").click(function(d){var b=$j(d.target);if(b.is("a")&&b.attr("href").match(/^#/)){var c=b.attr("href");c.replace(/(^#?)/,"#");if($j(c).length>0||$j('a[name="'+c.replace("#","")+'"]').length>0){window.setTimeout(function(){window.scrollBy(0,-30)},10)}}})}});$j("a[href='#action:login']").live("click",function(b){if(!WIKIREQUEST.userId){WIKIDOT.page.listeners.loginClick();return false}})};$j(function(){if($j("#navi-bar").length>0){if(window.location.hash){var a=window.location.hash;a.replace(/(^#?)/,"#");if($j(a).length>0||$j('a[name="'+a.replace("#","")+'"]').length>0){window.setTimeout(function(){window.scrollBy(0,-30)},10)}}}});WIKIDOT.page.init();var INSERT_NEWLINE="\n";var MATCH_NEWLINE="\r?\n";WIKIDOT.Editor={editElementId:null,toolbarPanelId:null,ranger:null};WIKIDOT.Editor.currentPos=null;WIKIDOT.Editor.currentRange=[0,0];WIKIDOT.Editor.init=function(d,c,b){WIKIDOT.Editor.editElementId=d;WIKIDOT.Editor.toolbarPanelId=c;WIKIDOT.Editor.ranger=new TextElementProxyUtil(d,b);YAHOO.util.Event.addListener(this.editElementId,"keypress",WIKIDOT.Editor.keyboardListener);YAHOO.util.Event.addListener(this.editElementId,"keydown",function(){WIKIDOT.Editor.lastKeyCode=null});YAHOO.util.Event.addListener(this.editElementId,"keyup",WIKIDOT.Editor.codeAssist.listener);var a;switch(OZONE.lang){case"pl":a="/common--editor/dialogs-pl.html";break;default:a="/common--editor/dialogs.html"}YAHOO.util.Connect.asyncRequest("GET",a,WIKIDOT.Editor.initCallback,null);OZONE.loc.addMessage("cancel","anuluj","pl");OZONE.loc.addMessage("insert code","wstaw kod","pl");OZONE.loc.addMessage("Image wizard","Magik wstawiania obrazu","pl");OZONE.loc.addMessage("Table wizard","Magik tabeli","pl");if(YAHOO.env.ua.ie==8){WIKIDOT.Editor.resizeIe();$j(window).resize(WIKIDOT.Editor.resizeIe)}};WIKIDOT.Editor.resizeIe=function(){var a=$j("#"+WIKIDOT.Editor.editElementId);a.css("width","97%");var b=a.width();a.css("width",null);if(!WIKIDOT.Editor.ratio){a.attr("cols",60);WIKIDOT.Editor.ratio=a.width()/60}a.attr("cols",b/WIKIDOT.Editor.ratio)};WIKIDOT.Editor.shutDown=function(){YAHOO.util.Event.removeListener(this.editElementId,"keypress",WIKIDOT.Editor.keyboardListener);YAHOO.util.Event.removeListener(this.editElementId,"keyup",WIKIDOT.Editor.codeAssist.listener);WIKIDOT.Editor.ranger=null;WIKIDOT.Editor.toolbarPanelId=null;WIKIDOT.Editor.editElementId=null};WIKIDOT.Editor.initCallback={success:function(f){if(jQuery("#wd-ed-dialogs").length==0){var e=f.responseText;var g=document.createElement("div");g.id="wd-ed-dialogs";g.innerHTML=e;g.style.display="none";var a=document.getElementsByTagName("body").item(0);a.appendChild(g)}var d=$("wd-ed-toolbar");var c=$(WIKIDOT.Editor.toolbarPanelId);if(c){c.innerHTML=OZONE.utils.olang(d.innerHTML);var b=c.getElementsByTagName("a");OZONE.dialog.hovertip.makeTip(b,{style:{width:"auto"},delay:200});WIKIDOT.page.fixers.fixMenu(c)}},failure:function(a){}};WIKIDOT.Editor.buttons={bold:function(a){WIKIDOT.Editor.utils.insertTags("**","**","bold text",WIKIDOT.Editor.utils.trimSelection)},italic:function(a){WIKIDOT.Editor.utils.insertTags("//","//","italic text",WIKIDOT.Editor.utils.trimSelection)},underline:function(a){WIKIDOT.Editor.utils.insertTags("__","__","underline text",WIKIDOT.Editor.utils.trimSelection)},strikethrough:function(a){WIKIDOT.Editor.utils.insertTags("--","--","strikethrough text",WIKIDOT.Editor.utils.trimSelection)},teletype:function(a){WIKIDOT.Editor.utils.insertTags("{{","}}","teletype text",WIKIDOT.Editor.utils.trimSelection)},superscript:function(a){WIKIDOT.Editor.utils.insertTags("^^","^^","superscript",WIKIDOT.Editor.utils.trimSelection)},subscript:function(a){WIKIDOT.Editor.utils.insertTags(",,",",,","subscript",WIKIDOT.Editor.utils.trimSelection)},raw:function(a){WIKIDOT.Editor.utils.insertTags("@@","@@","raw text",WIKIDOT.Editor.utils.trimSelection)},heading:function(c,d){var a="";for(var b=0;b<d;b++){a+="+"}WIKIDOT.Editor.utils.insertTags(a+" ","","heading level "+d,WIKIDOT.Editor.utils.trimSelection,WIKIDOT.Editor.utils.endWith2NewLine,WIKIDOT.Editor.utils.startWith2NewLine)},quote:function(a){WIKIDOT.Editor.utils.insertTags("> ","","quoted text",WIKIDOT.Editor.utils.processQuoteText,WIKIDOT.Editor.utils.endWithAtLeast1NewLine,WIKIDOT.Editor.utils.startWithAtLeast1NewLine)},hr:function(a){WIKIDOT.Editor.utils.insertText("------",WIKIDOT.Editor.utils.endWithAtLeast2NewLine,WIKIDOT.Editor.utils.startWithAtLeast2NewLine)},clearFloat:function(b,a){var c="~~~~";if(a){c+=a}WIKIDOT.Editor.utils.insertText(c,WIKIDOT.Editor.utils.endWithAtLeast2NewLine,WIKIDOT.Editor.utils.startWithAtLeast2NewLine)},toc:function(a){WIKIDOT.Editor.utils.insertText("[[toc]]",WIKIDOT.Editor.utils.endWithAtLeast1NewLine,WIKIDOT.Editor.utils.startWithAtLeast1NewLine)},uri:function(a){WIKIDOT.Editor.utils.insertTags("[http://www.example.com ","]","describe link",WIKIDOT.Editor.utils.trimSelection)},pageLink:function(a){WIKIDOT.Editor.utils.insertTags("[[[","]]]","page name",WIKIDOT.Editor.utils.trimSelection)},math:function(a){WIKIDOT.Editor.utils.insertTags("[[math]]"+INSERT_NEWLINE,INSERT_NEWLINE+"[[/math]]","insert LaTeX equation here",WIKIDOT.Editor.utils.trimSelection,WIKIDOT.Editor.utils.endWithAtLeast2NewLine,WIKIDOT.Editor.utils.startWithAtLeast2NewLine)},numberedList:function(a){WIKIDOT.Editor.utils.insertTags("# ","","list item",WIKIDOT.Editor.utils.processNumberedList,WIKIDOT.Editor.utils.endWithAtLeast1NewLine,WIKIDOT.Editor.utils.startWithAtLeast1NewLine)},bulletedList:function(a){WIKIDOT.Editor.utils.insertTags("* ","","list item",WIKIDOT.Editor.utils.processBulletedList,WIKIDOT.Editor.utils.endWithAtLeast1NewLine,WIKIDOT.Editor.utils.startWithAtLeast1NewLine)},definitionList:function(a){WIKIDOT.Editor.utils.insertTags(": "," : definition","item",WIKIDOT.Editor.utils.processBulletedList,WIKIDOT.Editor.utils.endWithAtLeast1NewLine,WIKIDOT.Editor.utils.startWithAtLeast1NewLine)},increaseListIndent:function(a){WIKIDOT.Editor.utils.insertText("",WIKIDOT.Editor.utils.increaseListIndent)},decreaseListIndent:function(a){WIKIDOT.Editor.utils.insertText("",WIKIDOT.Editor.utils.decreaseListIndent)},footnote:function(a){WIKIDOT.Editor.utils.insertTags("[[footnote]] "," [[/footnote]]","footnote text",WIKIDOT.Editor.utils.trimSelection)},inlineMath:function(a){WIKIDOT.Editor.utils.insertTags("[[$ "," $]]","insert LaTeX equation here",WIKIDOT.Editor.utils.trimSelection)},code:function(a){WIKIDOT.Editor.utils.insertTags("[[code]]"+INSERT_NEWLINE,INSERT_NEWLINE+"[[/code]]","insert the code here",WIKIDOT.Editor.utils.trimSelection,WIKIDOT.Editor.utils.endWithAtLeast2NewLine,WIKIDOT.Editor.utils.startWithAtLeast2NewLine)},html:function(a){WIKIDOT.Editor.utils.insertTags("[[html]]"+INSERT_NEWLINE,INSERT_NEWLINE+"[[/html]]","Insert any HTML code, including widgets and video or audio players",WIKIDOT.Editor.utils.trimSelection,WIKIDOT.Editor.utils.endWithAtLeast2NewLine,WIKIDOT.Editor.utils.startWithAtLeast2NewLine)},image:function(a){WIKIDOT.Editor.utils.insertTags("[[image ","]]","source",WIKIDOT.Editor.utils.trimSelection)},div:function(a){WIKIDOT.Editor.utils.insertTags("[[div]]"+INSERT_NEWLINE,INSERT_NEWLINE+"[[/div]]","block contents",WIKIDOT.Editor.utils.trimSelection,WIKIDOT.Editor.utils.endWithAtLeast2NewLine,WIKIDOT.Editor.utils.startWithAtLeast2NewLine)},bibliography:function(a){WIKIDOT.Editor.utils.insertTags("[[bibliography]]"+INSERT_NEWLINE+": "," : full source reference"+INSERT_NEWLINE+"[[/bibliography]]","label",WIKIDOT.Editor.utils.trimSelection,WIKIDOT.Editor.utils.endWithAtLeast2NewLine,WIKIDOT.Editor.utils.startWithAtLeast2NewLine)},bibliographycitation:function(a){WIKIDOT.Editor.utils.insertTags("[((bibcite ","))]","label",WIKIDOT.Editor.utils.trimSelection)},imageWizard:function(a){WIKIDOT.Editor.currentPos=WIKIDOT.Editor.ranger.getSelectionRange()[0];var b=new OZONE.dialogs.Dialog();b.style.width="70%";b.title=ogettext("Image wizard");b.buttons=["cancel","insert code"];b.addButtonListener("cancel",b.close);b.addButtonListener("insert code",WIKIDOT.Editor.imageWizard.insertCode);b.content=$("wd-ed-imagewizard-dialog").innerHTML.replace(/\-template/g,"");b.show();$j("#342type1").focus();if($("np-title")){$j(".image-wizard-source-attached").hide();$j(".image-wizard-source-attached input").attr("disabled","disabled")}else{$j(".image-wizard-source-attached").show();$j(".image-wizard-source-attached input").removeAttr("disabled")}WIKIDOT.Editor.imageWizard.updateSourceBlock()},tableWizard:function(a){WIKIDOT.Editor.currentPos=WIKIDOT.Editor.ranger.getSelectionRange()[0];var b=new OZONE.dialogs.Dialog();b.title=ogettext("Table wizard");b.buttons=["cancel","insert code"];b.addButtonListener("cancel",b.close);b.addButtonListener("insert code",WIKIDOT.Editor.listeners.tableWizardInsert);b.content=$("wd-ed-tablewizard-dialog").innerHTML.replace(/\-template/g,"");b.show();$j("#wd-ed-tablewizard-rows").focus()},uriWizard:function(a){WIKIDOT.Editor.currentPos=WIKIDOT.Editor.ranger.getSelectionRange()[0];var b=new OZONE.dialogs.Dialog();b.title=ogettext("URL link wizard");b.buttons=["cancel","insert code"];b.addButtonListener("cancel",b.close);b.addButtonListener("insert code",WIKIDOT.Editor.listeners.uriWizardInsert);b.content=$("wd-ed-uriwizard-dialog").innerHTML.replace(/\-template/g,"");b.show();$j("#wd-ed-uriwizard-uri").focus()},pageLinkWizard:function(c){WIKIDOT.Editor.currentPos=WIKIDOT.Editor.ranger.getSelectionRange()[0];var f=new OZONE.dialogs.Dialog();f.title=ogettext("Page link wizard");f.buttons=["cancel","insert code"];f.addButtonListener("cancel",f.close);f.addButtonListener("insert code",WIKIDOT.Editor.listeners.pageLinkWizardInsert);f.content=$("wd-ed-pagelinkwizard-dialog").innerHTML.replace(/\-template/g,"");f.show();var a=new YAHOO.util.XHRDataSource("/quickmodule.php");a.responseType=YAHOO.util.XHRDataSource.TYPE_JSON;a.responseSchema={resultsList:"pages",fields:["unix_name","title"]};var b=new YAHOO.widget.AutoComplete("wd-ed-pagelinkwizard-page","autocomplete3432",a);b.generateRequest=function(d){return"?s="+WIKIREQUEST.info.siteId+"&module=PageLookupQModule&q="+d};b.formatResult=function(d,h){var g=d[1];var e=d[0];if(e!=null){return"<div >"+e+'</div><div style="font-size: 85%;">('+g+")</div>"}else{return""}};b.minQueryLength=2;b.queryDelay=0.5;b.forceSelection=false;b.autoHighlight=false;$j("#wd-ed-pagelinkwizard-page").focus()},codeWizard:function(a){WIKIDOT.Editor.currentRange=WIKIDOT.Editor.ranger.getSelectionRange();var b=new OZONE.dialogs.Dialog();b.title=ogettext("Code block wizard");b.buttons=["cancel","insert code"];b.addButtonListener("cancel",b.close);b.addButtonListener("insert code",WIKIDOT.Editor.listeners.codeWizardInsert);b.content=$("wd-ed-codewizard-dialog").innerHTML.replace(/\-template/g,"");b.show();$j("#wd-ed-codewizard-type").focus()},erefWizard:function(c){WIKIDOT.Editor.currentPos=WIKIDOT.Editor.ranger.getSelectionRange()[0];var f=new OZONE.dialogs.Dialog();f.title=ogettext("Equation reference wizard");f.buttons=["cancel","insert code"];f.addButtonListener("cancel",f.close);f.addButtonListener("insert code",WIKIDOT.Editor.erefWizard.insertCode);f.content=$("wd-ed-erefwizard-dialog").innerHTML.replace(/\-template/g,"");f.show();var l=$(WIKIDOT.Editor.editElementId).value;var g=l.match(/^\[\[math\s([a-zA-Z0-9]+)\]\](\r?\n.*)*?\r?\n\[\[\/math\]\]/mg);if(g==null||g.length==0){var k=new OZONE.dialogs.ErrorDialog();k.content="Sorry, no labelled equations found.";k.show();return}var h="";if(g.length==0){h="no equations with labels available"}else{h='<select id="wd-ed-erefwizard-ref">';for(var a=0;a<g.length;a++){var j=g[a].replace(/\[\[math\s(.+?)\]\](\r*\n.*)*/,"$1");var b=g[a].replace(/\[\[math[^\]]*\]\]((?:\r?\n.*)*?)\n\[\[\/math\]\]/,"$1");$("wd-ed-erefwizard-preview").innerHTML+='<div id="wd-ed-erefwizard-preview-'+j+'">'+b+"</div>";h+='<option value="'+j+'">'+j+"</option>"}h+="</select>"}$("wd-ed-erefwizard-options").innerHTML=h;OZONE.dialog.factory.boxcontainer().centerContent();WIKIDOT.Editor.erefWizard.changeRef(null);YAHOO.util.Event.addListener("wd-ed-erefwizard-ref","change",WIKIDOT.Editor.erefWizard.changeRef);$j("#wd-ed-erefwizart-weq").focus()}};WIKIDOT.Editor.erefWizard={};WIKIDOT.Editor.erefWizard.changeRef=function(d){var c=$("wd-ed-erefwizard-preview");var a=c.childNodes;for(var b=0;b<a.length;b++){a[b].style.display="none"}$("wd-ed-erefwizard-preview-"+$("wd-ed-erefwizard-ref").value).style.display="block"};WIKIDOT.Editor.erefWizard.insertCode=function(c){var b=$("wd-ed-erefwizard-ref").value;var a="[[eref "+b+"]]";if($("wd-ed-erefwizart-weq").checked==true){a="Eq.("+a+")"}WIKIDOT.Editor.ranger.setSelectionRange(WIKIDOT.Editor.currentPos,WIKIDOT.Editor.currentPos);WIKIDOT.Editor.utils.insertText(a);OZONE.dialog.cleanAll()};WIKIDOT.Editor.imageWizard={};WIKIDOT.Editor.imageWizard.updateSourceBlock=function(b){var a;$("wd-ed-imagewizard-byuri").style.display="none";$("wd-ed-imagewizard-byfile").style.display="none";$("wd-ed-imagewizard-byflickr").style.display="none";$("wd-ed-imagewizard-checkresult").innerHTML="";if($("342type1").checked==true){a="uri";$("wd-ed-imagewizard-byuri").style.display="block"}else{if($("342type2").checked==true){a="file";$("wd-ed-imagewizard-byfile").style.display="block";WIKIDOT.Editor.imageWizard.updateAttachements()}else{if($("342type3").checked==true){a="flickr";$("wd-ed-imagewizard-byflickr").style.display="block"}}}WIKIDOT.Editor.imageWizard.source=a};WIKIDOT.Editor.imageWizard.updateAttachements=function(){OZONE.ajax.requestModule("editor/ImageAttachedFileModule",{pageId:WIKIREQUEST.info.pageId},WIKIDOT.Editor.imageWizard.updateAttachementsCallback)};WIKIDOT.Editor.imageWizard.updateAttachementsCallback=function(a){$("wd-ed-imagewizard-byfile-list").innerHTML=a.body;WIKIDOT.Editor.imageWizard.attachementSelect()};WIKIDOT.Editor.imageWizard.attachementSelect=function(c){var b=$("wd-ed-imagewizard-byfile-filename");if(b){var a=$("wd-ed-imagewizard-byfile-filename").value;var d="/local--resized-images/"+WIKIREQUEST.info.requestPageName+"/"+a+"/thumbnail.jpg";$("wd-ed-imagewizard-byfile-preview").src=d}};WIKIDOT.Editor.imageWizard.checkFlickrImage=function(f){p=new Object();var d=$("wd-ed-imagewizard-checkresult");var b=$("wd-ed-imagewizard-flickr").value;var c=b.replace(/^http:\/\/(?:www\.)?flickr\.com\/.*?\/([0-9]+)(?:\/.*)?$/,"$1");var a=null;if(b.match(/^http:\/\/static\.flickr\.com\/[0-9]+\/([0-9]+)_([0-9a-z]+).*$/)){c=b.replace(/^http:\/\/static\.flickr\.com\/[0-9]+\/([0-9]+)_([0-9a-z]+).*$/,"$1");a=b.replace(/^http:\/\/static\.flickr\.com\/[0-9]+\/([0-9]+)_([0-9a-z]+).*$/,"$2");p.secret=a}d.innerHTML="checking image "+c+"...";if(!c.match(/^([0-9]+)$/)){d.innerHTML='<p style="color: red">Not a valid input for the flickr.com image.</p>';return}p.flickr_id=c;OZONE.ajax.requestModule("editor/FlickrCheckModule",p,WIKIDOT.Editor.imageWizard.checkFlickrImageCallback)};WIKIDOT.Editor.imageWizard.checkFlickrImageCallback=function(b){var a=$("wd-ed-imagewizard-checkresult");a.innerHTML=b.body};WIKIDOT.Editor.imageWizard.checkUriImage=function(c){var a=$("wd-ed-imagewizard-uri").value;var d=window.open("about:blank","_blank","location=no,menubar=no,titlebar=no,resizable=yes,scrollbars=yes,width="+(screen.width*0.5)+",height="+(screen.height*0.5)+",top="+(screen.height*0.25)+",left="+(screen.width*0.25));d.document.write('<html><head><title>Checking image...</title></head><body><div style="text-align: center"><p>	If you see the image below - that means the location of the image you have entered is ok.</p>	<img id="check-image" src="'+a+'" alt="image not available!"/><p><a href="javascript:;" onclick="window.close()">close this window</a></p></div></body></html>');var b=d.document.getElementById("check-image");YAHOO.util.Event.addListener(b,"load",WIKIDOT.Editor.imageWizard.checkUriImageResize,d)};WIKIDOT.Editor.imageWizard.checkUriImageResize=function(f,d){var c=Math.min(this.width+200,screen.availWidth-100);var a=Math.min(this.height+200,screen.availHeight-100);var b=(screen.availWidth-c)*0.5;var g=(screen.availHeight-a)*0.5;d.resizeTo(c,a);d.moveTo(b,g)};WIKIDOT.Editor.imageWizard.insertCode=function(g){var j=WIKIDOT.Editor.imageWizard.source;var a;if(j=="uri"){a=$("wd-ed-imagewizard-uri").value}else{if(j=="file"){a=$("wd-ed-imagewizard-byfile-filename").value}else{if(j=="flickr"){var k=$("wd-ed-imagewizard-flickr").value;var l=k.replace(/^http:\/\/(?:www\.)?flickr\.com\/.*?\/([0-9]+)(?:\/.*)?$/,"$1");var d=null;if(k.match(/^http:\/\/static\.flickr\.com\/[0-9]+\/([0-9]+)_([0-9a-z]+).*$/)){l=k.replace(/^http:\/\/static\.flickr\.com\/[0-9]+\/([0-9]+)_([0-9a-z]+).*$/,"$1");d=k.replace(/^http:\/\/static\.flickr\.com\/[0-9]+\/([0-9]+)_([0-9a-z]+).*$/,"$2")}if(!l.match(/^([0-9]+)$/)){var h=$("wd-ed-imagewizard-checkresult");h.innerHTML='<p style="color: red">Not a valid input for the flickr.com image.</p>';return}a="flickr:"+l;if(d){a+="_"+d}}}}var m="";var c=$("wd-ed-imagewizard-size");if(c){m=c.value}if(m!=""){m=' size="'+m+'"'}var f=$("wd-ed-imagewizard-position").value.replace(/l/,"<").replace(/r/,">").replace(/c/,"=");var b="[["+f+"image "+a+m+"]]";WIKIDOT.Editor.ranger.setSelectionRange(WIKIDOT.Editor.currentPos,WIKIDOT.Editor.currentPos);WIKIDOT.Editor.utils.insertText(b);OZONE.dialog.cleanAll()};WIKIDOT.Editor.listeners={tableWizardInsert:function(g){var f=$("wd-ed-tablewizard-rows").value;var d=$("wd-ed-tablewizard-columns").value;var h=$("wd-ed-tablewizard-headers").checked;var b="";for(var c=0;c<f;c++){b+=INSERT_NEWLINE+"||";for(var a=0;a<d;a++){if(c==0&&h){b+="~ header ||"}else{b+=" cell-content ||"}}}WIKIDOT.Editor.ranger.setSelectionRange(WIKIDOT.Editor.currentPos,WIKIDOT.Editor.currentPos);WIKIDOT.Editor.utils.insertText(b,WIKIDOT.Editor.utils.endWithAtLeast1NewLine,WIKIDOT.Editor.utils.startWithAtLeast2NewLine);OZONE.dialog.cleanAll()},uriWizardInsert:function(d){var c=$("wd-ed-uriwizard-uri").value;var b=$("wd-ed-uriwizard-anchor").value;var f=$("wd-ed-uriwizard-newwindow").checked;var a="";if(b==null||b==""){if(f){a+="*"}a+=c}else{a="[";if(f){a+="*"}a+=c+" "+b+"]"}WIKIDOT.Editor.ranger.setSelectionRange(WIKIDOT.Editor.currentPos,WIKIDOT.Editor.currentPos);WIKIDOT.Editor.utils.insertText(a);OZONE.dialog.cleanAll()},pageLinkWizardInsert:function(d){var a=$("wd-ed-pagelinkwizard-page").value;var c=$("wd-ed-pagelinkwizard-anchor").value;var b="[[["+a;if(c!=null&&c!=""){b+=" |"+c}b+="]]]";WIKIDOT.Editor.ranger.setSelectionRange(WIKIDOT.Editor.currentPos,WIKIDOT.Editor.currentPos);WIKIDOT.Editor.utils.insertText(b);OZONE.dialog.cleanAll()},codeWizardInsert:function(d){var c=$("wd-ed-codewizard-type").value;var b="[[code";if(c!=""){b+=' type="'+c+'"'}b+="]]"+INSERT_NEWLINE;var a=INSERT_NEWLINE+"[[/code]]";WIKIDOT.Editor.ranger.setSelectionRange(WIKIDOT.Editor.currentRange[0],WIKIDOT.Editor.currentRange[1]);WIKIDOT.Editor.utils.insertTags(b,a,"insert the code here",WIKIDOT.Editor.utils.trimSelection,WIKIDOT.Editor.utils.endWithAtLeast2NewLine,WIKIDOT.Editor.utils.startWithAtLeast2NewLine);OZONE.dialog.cleanAll()}};WIKIDOT.Editor.keyboardListener=function(d){WIKIDOT.Editor.lastKeyCode=null;var c=YAHOO.util.Event.getCharCode(d);WIKIDOT.Editor.lastKeyCode=c;var a="";if(d.ctrlKey==true){a+="ctrl+"}if(d.altKey==true){a+="alt+"}a+=String.fromCharCode(c);if($("editdebug")){$("editdebug").innerHTML=c}var b=WIKIDOT.Editor.keys[a];if(!b){b=WIKIDOT.Editor.keyCodes[c]}if(b){YAHOO.util.Event.preventDefault(d);b.call(null,d)}};WIKIDOT.Editor.codeAssist={};WIKIDOT.Editor.codeAssist.listener=function(b){var a=WIKIDOT.Editor.lastKeyCode;if(a!=13){return}WIKIDOT.Editor.utils.insertText("",WIKIDOT.Editor.codeAssist.rules.listEnd);WIKIDOT.Editor.utils.insertText("",WIKIDOT.Editor.codeAssist.rules.list);WIKIDOT.Editor.utils.insertText("",WIKIDOT.Editor.codeAssist.rules.listNested);WIKIDOT.Editor.codeAssist.rules.completeBlock();WIKIDOT.Editor.utils.insertText("",WIKIDOT.Editor.codeAssist.rules.definitionList);WIKIDOT.Editor.utils.insertText("",WIKIDOT.Editor.codeAssist.rules.keepIndent);WIKIDOT.Editor.utils.insertText("",WIKIDOT.Editor.codeAssist.rules.indentEnd)};WIKIDOT.Editor.codeAssist.rules={};WIKIDOT.Editor.codeAssist.rules.list=function(a){a=a.replace(/((?:\r?\n|^)([\*#])\s.*?\r?\n)$/,"$1$2 ");return a};WIKIDOT.Editor.codeAssist.rules.definitionList=function(a){a=a.replace(/(\r?\n:\s.+?\s:.*\r?\n)$/,"$1: ");return a};WIKIDOT.Editor.codeAssist.rules.listNested=function(a){a=a.replace(/(\r?\n *[\*#]\s.+\r?\n( *)([\*#])\s.*?\r?\n)$/,"$1$2$3 ");return a};WIKIDOT.Editor.codeAssist.rules.listEnd=function(a){a=a.replace(/((?:\r?\n|^)\s*[\*#:]\s.*?\r?\n)\s*[\*#:]\s\r?\n$/,"$1"+INSERT_NEWLINE);return a};WIKIDOT.Editor.codeAssist.rules.keepIndent=function(a){a=a.replace(/(\r?\n(\t+).+\r?\n)$/,"$1$2");return a};WIKIDOT.Editor.codeAssist.rules.indentEnd=function(a){a=a.replace(/(\r?\n(\t+)\r?\n)$/,INSERT_NEWLINE+INSERT_NEWLINE);return a};WIKIDOT.Editor.codeAssist.rules.completeBlock=function(){var f=$(WIKIDOT.Editor.editElementId);var e=f.scrollTop;var b=WIKIDOT.Editor.ranger;var a=b.getSelectionRange();var d=f.value.substring(0,a[1]);var g=f.value.substring(a[1],f.value.length);var c=d.length;d=d.replace(/(\[\[(code|embedvideo|math|embed)(?:\s[^\]]*?)?\]\]\r?\n)$/,"$1"+INSERT_NEWLINE+"[[/$2]]");f.value=d+g;var h=c;b.setSelectionRange(h,h);f.scrollTop=e};WIKIDOT.Editor.codeAssist.rules.completeBlockPost=function(a){};WIKIDOT.Editor.keys=new Object();WIKIDOT.Editor.keys["ctrl+b"]=WIKIDOT.Editor.buttons.bold;WIKIDOT.Editor.keys["ctrl+i"]=WIKIDOT.Editor.buttons.italic;WIKIDOT.Editor.keys["ctrl+u"]=WIKIDOT.Editor.buttons.underline;WIKIDOT.Editor.keyCodes=new Object();WIKIDOT.Editor.keyCodes[9]=function(a){WIKIDOT.Editor.utils.insertText("\t");YAHOO.util.Event.stopEvent(a)};WIKIDOT.Editor.utils={};WIKIDOT.Editor.utils.insertTags=function(f,m,d,q,l,a,r){var o=$(WIKIDOT.Editor.editElementId);o.focus();var c=WIKIDOT.Editor.ranger;c.trimSelection();var k=c.getSelectionRange();var e=o.scrollTop;var j=o.value.substring(0,k[0]);if(l){j=l.call(null,j)}var s=o.value.substring(k[1],o.value.length);if(a){s=a.call(null,s)}if(k[0]!=k[1]){var g=o.value.substring(k[0],k[1]);if(q){g=q.call(null,g)}o.value=j+f+g+m+s;var h=o.value.length-s.length;c.setSelectionRange(h,h)}else{o.value=j+f+d+m+s;if(!r){var n=j.length+f.length;var b=n+d.length;c.setSelectionRange(n,b)}else{var h=o.value.length-s.length;c.setSelectionRange(h,h)}}o.focus();o.scrollTop=e};WIKIDOT.Editor.utils.insertText=function(k,f,a){WIKIDOT.Editor.utils.insertTags("","",k,null,f,a,true);return;var h=$(WIKIDOT.Editor.editElementId);var b=WIKIDOT.Editor.ranger;var g=b.getSelectionRange();var c=h.scrollTop;var e=h.value.substring(0,g[0]);if(f){e=f.call(null,e)}var j=h.value.substring(g[1],h.value.length);if(a){j=a.call(null,j)}h.value=e+k+j;var d=e.length;b.setSelectionRange(d,d);h.focus();h.scrollTop=c};WIKIDOT.Editor.utils.trimSelection=function(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")};WIKIDOT.Editor.utils.endWithNewLine=function(a){return a.replace(/[\s\r\n]+$/,"")+INSERT_NEWLINE};WIKIDOT.Editor.utils.endWithAtLeast1NewLine=function(a){return a.replace(/\r?\n$/,"")+INSERT_NEWLINE};WIKIDOT.Editor.utils.startWithNewLine=function(a){return INSERT_NEWLINE+a.replace(/^[\s\r\n]+/,"")};WIKIDOT.Editor.utils.startWithAtLeast1NewLine=function(a){if(a.length==0){return a}return INSERT_NEWLINE+a.replace(/^\r?\n/,"")};WIKIDOT.Editor.utils.startWithAtLeast2NewLine=function(a){if(a.length==0){return a}return INSERT_NEWLINE+INSERT_NEWLINE+a.replace(/^\r?\n(\s*\r?\n)?/,"")};WIKIDOT.Editor.utils.endWithAtLeast2NewLine=function(a){if(a.length==0){return a}return a.replace(/(\r?\n\s*)?\r?\n$/,"")+INSERT_NEWLINE+INSERT_NEWLINE};WIKIDOT.Editor.utils.endWith2NewLine=function(a){if(a.length==0){return a}return a.replace(/[\s\r\n]+$/,"")+INSERT_NEWLINE+INSERT_NEWLINE};WIKIDOT.Editor.utils.startWith2NewLine=function(a){return INSERT_NEWLINE+INSERT_NEWLINE+a.replace(/^[\s\r\n]+/,"")};WIKIDOT.Editor.utils.processQuoteText=function(a){var a=a.replace(/^\s+/,"").replace(/\s+$/,"");a=a.replace(/\r?\n/g,INSERT_NEWLINE+"> ");return a};WIKIDOT.Editor.utils.processNumberedList=function(a){var a=a.replace(/^\s+/,"").replace(/\s+$/,"");a=a.replace(/\r?\n/g,INSERT_NEWLINE+"# ");return a};WIKIDOT.Editor.utils.processBulletedList=function(a){var a=a.replace(/^\s+/,"").replace(/\s+$/,"");a=a.replace(/\r?\n/g,INSERT_NEWLINE+"* ");return a};WIKIDOT.Editor.utils.increaseListIndent=function(a){if(a.match(/\r?\n(\s*)[\*#].*\r?\n(\1)\s+[\*#].*$/)){return a}return a.replace(/(\r?\n\s*[\*#].*)(\r?\n\s*)([\*#].*)$/,"$1$2 $3")};WIKIDOT.Editor.utils.decreaseListIndent=function(a){return a.replace(/(\r?\n\s*) ([\*#].*)$/,"$1$2")};TextElementProxyUtil=function(a,b){this.field=$(a);this.detectBrowser(b)};TextElementProxyUtil.prototype.detectBrowser=function(c){if(YAHOO.env.ua.gecko||((this.field.selectionStart||this.field.selectionStart==0)&&!YAHOO.env.ua.ie)){this.browserType="gecko"}else{var b,a;if(c){b=document.createElement("textarea");b.style.position="absolute";b.style.top="0";b.style.left="-1000px";a=document.getElementsByTagName("body").item(0);a.appendChild(b)}else{b=this.field}b.focus();if(document.selection.createRange){this.browserType="ie";INSERT_NEWLINE="\r\n"}if(c){a.removeChild(b)}}};TextElementProxyUtil.prototype.getCursorPosition=function(){var a=this.getSelectionRange();return a[1]};TextElementProxyUtil.prototype.getSelectionRange=function(){var c;var b;this.field.focus();if(this.browserType=="gecko"){c=this.field.selectionStart;b=this.field.selectionEnd}if(this.browserType=="ie"){if(document.selection){var a=document.selection.createRange();var d=a.duplicate();d.moveToElementText(this.field);d.setEndPoint("StartToStart",a);c=this.field.value.length-d.text.length;b=c+a.text.length}}if(this.browserType=="rest"){}this.field.focus();return[c,b]};TextElementProxyUtil.prototype.setSelectionRange=function(c,b){this.field.focus();if(this.browserType=="gecko"){this.field.setSelectionRange(c,b)}if(this.browserType=="ie"){var d=this.field.value.substring(0,c);var e=this.field.value.substring(c,b);c=d.replace(/\r\n/g,"\n").length;b=c+e.replace(/\r\n/g,"\n").length;var a=this.field.createTextRange();a.collapse(true);a.moveEnd("character",b);a.moveStart("character",c);a.select()}if(this.browserType=="rest"){}this.field.focus()};TextElementProxyUtil.prototype.trimSelection=function(){var b=this.getSelectionRange();var d=this.field.value.substring(b[0],b[1]);var c=d.length-d.replace(/^\s+/,"").length;var a=d.length-d.replace(/\s+$/,"").length;this.setSelectionRange(b[0]+c,b[1]-a)};jQuery(document).ready(function(){jQuery(document).one("keydown","ctrl+e",function(a){WIKIDOT.page.listeners.editClick(a);return false})});function keyBindSavePage(){jQuery(document).bind("keydown","backspace",function(a){if(/textarea|input/i.test(a.target.nodeName)==false){return false}});jQuery(document).one("keydown","ctrl+s",function(a){WIKIDOT.modules.PageEditModule.listeners.save(a);return false})}function keyBindNewPost(){jQuery("form#new-post-form").one("keydown","ctrl+s",function(a){WIKIDOT.modules.ForumNewPostFormModule.listeners.save(a);return false})}function keyBindEditPost(){jQuery("form#edit-post-form").one("keydown","ctrl+s",function(a){WIKIDOT.modules.ForumEditPostFormModule.listeners.save(a);return false})}function keyBindNewThread(){jQuery("form#new-thread-form").one("keydown","ctrl+s",function(a){WIKIDOT.modules.ForumNewThreadModule.listeners.post(a);return false})}function keyBindEditThread(){jQuery("form#thread-meta-form").one("keydown","ctrl+s",function(a){WIKIDOT.modules.ForumEditThreadMetaModule.listeners.save(a);return false})}function keyBindSendPM(){jQuery("form#new-pm-form").one("keydown","ctrl+s",function(a){WIKIDOT.modules.PMComposeModule.listeners.send(a);return false})};